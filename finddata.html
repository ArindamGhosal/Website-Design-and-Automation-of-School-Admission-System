<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find Data</title>
    <style>
        body {
            text-align: center;
        }

        #enterDetails {
            float: left;
            width: 50%;
            background-color: darkslategray;
            color: floralwhite;
        }

        #findDetails {
            float: left;
            width: 100%;
            background-color: floralwhite;
            color: darkslategray;
        }

        input {
            width: 120px;
        }
    </style>
</head>

<body>
    <!-- <div id="enterDetails">
        <h1>Enter details</h1>

        <h4>ID</h4> 
        <input id="enterID" type="text"> 

        <h4>Name</h4> 
        <input id="enterName" type="text"> 

        <h4>Age</h4> 
        <input id="enterAge" type="number"> <br><br>

         <button id="insert">INSERT</button> -->
    <!-- <button id="update">UPDATE</button> -->
    <!-- <button id="remove">REMOVE</button> <br><br> -->
    <!-- </div> -->

    <div id="findDetails">
        <h1>Find by Name</h1>
        <h4>ID</h4>
        <input id="name" type="text"> <br><br>
        <button id="find">FIND</button>
        <h3 id="findname" type="text"></h3>
        <h3 id="findClass" type="number"></h3>
        <h3 id="findSection" type="text"></h3>
        <h3 id="findfathername" type="text"></h3>
        <h3 id="findmothername" type="text"></h3>
        <h3 id="findbirthday" type="date"></h3>
        <h3 id="findACN" type="number"></h3>
        <h3 id="findContactNo" type="number"></h3>
        <h3 id="findWPC" type="text"></h3>
        <h3 id="findaddress" type="text"></h3>
        <h3 id="findR" type="text"></h3>
        <h4 id="findCaste" type="text">
            </h3>
            <h3 id="findgender_details" type="text"></h3>
            <h3 id="findgender_details" type="text"></h3>
            <h3 id="findBankName" type="text"></h3>
            <h3 id="findBankBranch" type="text"></h3>
            <h3 id="findalpha" type="alpha"></h3>
            <h3 id="findBankAccount" type="number"></h3>
            <br><br>

            <!-- <button id="update">UPDATE</button> -->
            <button id="remove">REMOVE</button> <br><br>
    </div>
    
<div id="UpdateDetails">
    <h1>Find by Name and Update</h1>
    <h4>Name</h4>
    <input id="name" type="text"> <br><br>
    <button id="update">UPDATE</button>
    <h3 id="name" type="text"></h3>
    <h3 id="Class" type="number"></h3>
    <h3 id="Section" type="text"></h3>
    <h3 id="fathername" type="text"></h3>
    <h3 id="mothername" type="text"></h3>
    <h3 id="birthday" type="date"></h3>
    <h3 id="ACN" type="number"></h3>
    <h3 id="ContactNo" type="number"></h3>
    <h3 id="WPC" type="text"></h3>
    <h3 id="address" type="text"></h3>
    <h3 id="R" type="text"></h3>
    <h4 id="Caste" type="text"></h3>
    <h3 id="gender_details" type="text"></h3>
     <h3 id="findgender_details" type="text"></h3>
    <h3 id="BankName" type="text"></h3>
    <h3 id="BankBranch" type="text"></h3>
    <h3 id="alpha" type="alpha"></h3>
    <h3 id="BankAccount" type="number"></h3>
    <br><br>

</div>
    <!-- <button onclick="window.location.href='finddata.html';">
    Click Here
</button> -->

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.20.0/firebase-app.js";

        // import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.20.0/firebase-analytics.js";

        // TODO: Add SDKs for Firebase products that you want to use

        // https://firebase.google.com/docs/web/setup#available-libraries


        // Your web app's Firebase configuration

        // For Firebase JS SDK v7.20.0 and later, measurementId is optional

        const firebaseConfig = {

            apiKey: "AIzaSyC2n08_FOeIGz100L_9lGtvQJNRhdrpY5U",

            authDomain: "school-website-f7bad.firebaseapp.com",

            databaseURL: "https://school-website-f7bad-default-rtdb.asia-southeast1.firebasedatabase.app",

            projectId: "school-website-f7bad",

            storageBucket: "school-website-f7bad.appspot.com",

            messagingSenderId: "92715865877",

            appId: "1:92715865877:web:6809fb0644372b437dbb1c",

            measurementId: "G-CSK54CW5TF"

        };


        // Initialize Firebase

        const app = initializeApp(firebaseConfig);

        // const analytics = getAnalytics(app);


        import { getDatabase, ref, get, set, child, update, remove }
            from "https://www.gstatic.com/firebasejs/9.20.0/firebase-database.js";


        const db = getDatabase();

        var name = document.querySelector("#name");
        var Class = document.querySelector("#Class");
        var Section = document.querySelector("#Section");
        var fathername = document.querySelector("#fathername");
        var mothername = document.querySelector("#mothername");
        var birthday = document.querySelector("#birthday");
        var ACN = document.querySelector("#ACN");
        var ContactNo = document.querySelector("#ContactNo");
        var WPC = document.querySelector("#WPC");
        var address = document.querySelector("#address");
        var R = document.querySelector("#R");
        var Caste = document.querySelector("#Caste");
        var gender_details = document.querySelector("#gender_details");


        // var fileInp = document.querySelector("#fileInp");
        var BankName = document.querySelector("#BankName");
        var BankBranch = document.querySelector("#BankBranch");
        var alpha = document.querySelector("#alpha");
        var BankAccount = document.querySelector("#BankAccount");

        var findname = document.querySelector("#findname");
        var findClass = document.querySelector("#findClass");
        var findSection = document.querySelector("#findSection");
        var findfathername = document.querySelector("#findfathername");
        var findmothername = document.querySelector("#findmothername");
        var findbirthday = document.querySelector("#findbirthday");
        var findACN = document.querySelector("#findACN");
        var findContactNo = document.querySelector("#findContactNo");
        var findWPC = document.querySelector("#findWPC");
        var findaddress = document.querySelector("#findaddress");
        var findR = document.querySelector("#findR");
        var findCaste = document.querySelector("#findCaste");
        var findgender_details = document.querySelector("#findgender_details");
        var findfileInp = document.querySelector("#findfileInp");
        var findBankName = document.querySelector("#findBankName");
        var findBankBranch = document.querySelector("#findBankBranch");
        var findalpha = document.querySelector("#findalpha");
        var findBankAccount = document.querySelector("#findBankAccount");


        var Submit = document.querySelector("#Submit");

        // var insertBtn = document.querySelector("#insert");
        var updateBtn = document.querySelector("#update");
        var removeBtn = document.querySelector("#remove");
        var findBtn = document.querySelector("#find");


        // function InsertData() {
        //     set(ref(db, "School/" + name.value), {
        //         name: name.value,
        //         Class: Class.value,
        //         Section: Section.value,
        //         fathername: fathername.value,
        //         mothername: mothername.value,
        //         birthday: birthday.value,
        //         ACN: ACN.value,
        //         ContactNo: ContactNo.value,
        //         WPC: WPC.value,
        //         address: address.value,
        //         R: R.value,
        //         Caste: Caste.value,
        //         gender_details: gender_details.value,
        //         // fileInp : fileInp.value,
        //         BankName: BankName.value,
        //         BankBranch: BankBranch.value,
        //         alpha: alpha.value,
        //         BankAccount: BankAccount.value

        //     })
        //         .then(() => {
        //             alert("Data added successfully");
        //         })
        //         .catch((error) => {
        //             alert(error);
        //         });
        // }

        function FindData() {
            const dbref = ref(db);

            get(child(dbref, "School/" + name.value))
                .then((snapshot) => {
                    if (snapshot.exists()) {
                        findname.innerHTML = "Name: " + snapshot.val().name;
                        findClass.innerHTML = "Class: " + snapshot.val().Class;
                        findSection.innerHTML = "Sec: " + snapshot.val().Section;
                        findfathername.innerHTML = "Fname: " + snapshot.val().fathername;
                        findmothername.innerHTML = "Mname: " + snapshot.val().mothername;
                        findbirthday.innerHTML = "DOB: " + snapshot.val().birthday;
                        findACN.innerHTML = "ACN: " + snapshot.val().ACN;
                        findContactNo.innerHTML = "ContactNo: " + snapshot.val().ContactNo;
                        findWPC.innerHTML = "WPC: " + snapshot.val().WPC;
                        findaddress.innerHTML = "Address: " + snapshot.val().address;
                        findR.innerHTML = "Religion: " + snapshot.val().R;
                        findCaste.innerHTML = "Caste:" + snapshot.val().Caste;
                        findgender_details.innerHTML = "Gender:" + snapshot.val().gender_details;
                        //  findfileInp = "Image:"+snapshot.val().Caste;
                        findBankName.innerHTML = "Bank Name:" + snapshot.val().BankName;
                        findBankBranch.innerHTML = "Branch:" + snapshot.val().BankBranch;
                        findalpha.innerHTML = "IFSC code:" + snapshot.val().alpha;
                        findBankAccount.innerHTML = "BA No:" + snapshot.val().BankAccount;
                    } else {
                        alert("No data found");
                    }
                })
                .catch((error) => {
                    alert(error)
                })

        }


        // function UpdateData() {
        //     update(ref(db, "School/" + name.value), {
        //         // name: name.value,
        //         // Class: Class.value,
        //         Section: Section.value,
        //         fathername: fathername.value,
        //         mothername: mothername.value,
        //         birthday: birthday.value,
        //         ACN: ACN.value,
        //         ContactNo: ContactNo.value,
        //         WPC: WPC.value,
        //         address: address.value,
        //         R: R.value,
        //         Caste: Caste.value,
        //         gender_details: gender_details.value,
        //         // fileInp : fileInp.value,
        //         BankName: BankName.value,
        //         BankBranch: BankBranch.value,
        //         alpha: alpha.value,
        //         BankAccount: BankAccount.value
        //     })
        //         .then(() => {
        //             alert("Data updated successfully");
        //         })
        //         .catch((error) => {
        //             alert(error);
        //         });
        // }

        function RemoveData() {
            remove(ref(db, "School/" + name.value))
                .then(() => {
                    alert("Data deleted successfully");
                })
                .catch((error) => {
                    alert(error);
                });
        }

        // Submit.addEventListener('click', InsertData);
        // updateBtn.addEventListener('click', UpdateData);
        removeBtn.addEventListener('click', RemoveData);
        findBtn.addEventListener('click', FindData);

    </script>

</body>

</html>
